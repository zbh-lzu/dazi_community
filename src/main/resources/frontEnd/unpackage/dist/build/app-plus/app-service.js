if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((s=>t.resolve(e()).then((()=>s))),(s=>t.resolve(e()).then((()=>{throw s}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...s){uni.__log__?uni.__log__(e,t,...s):console[e].apply(console,[...s,t])}const s=(e,t)=>{const s=e.__vccOpts||e;for(const[a,o]of t)s[a]=o;return s};const a=s({data:()=>({isSearchVisible:!1,searchKeyword:"",isLoading:!0,isLoadingMore:!1,tasks:[],filteredTasks:[],page:1,hasMore:!0,isDragging:!1,draggingIndex:-1,dragOverIndex:-1,startY:0,currentY:0,startTime:0,dragThreshold:10,longPressTimer:null,longPressDuration:500,itemHeight:0,scrollTop:0,autoScrollTarget:0,autoScrollTimer:null,isLongPressing:!1,hasMoved:!1}),onLoad(){t("log","at pages/tasks/tasks.vue:158","任务页面正在加载..."),this.loadTasks(!0)},onShow(){0===this.tasks.length&&this.loadTasks(!0)},methods:{showSearch(){this.isSearchVisible=!0},hideSearch(){this.isSearchVisible=!1,this.searchKeyword="",this.filteredTasks=[...this.tasks]},onSearch(){this.searchKeyword.trim()?this.filteredTasks=this.tasks.filter((e=>e.name.includes(this.searchKeyword)||e.description.includes(this.searchKeyword)||e.type.includes(this.searchKeyword))):this.filteredTasks=[...this.tasks]},resetSort(){this.loadTasks(!0)},async loadTasks(e=!1){t("log","at pages/tasks/tasks.vue:201","loadTasks被调用, reset:",e),e&&(this.page=1,this.tasks=[],this.isLoading=!0);try{await new Promise((e=>setTimeout(e,100)));const s=this.generateMockTasks();t("log","at pages/tasks/tasks.vue:215","生成的任务数据:",s.length,"个任务"),this.tasks=e?s:[...this.tasks,...s],this.filteredTasks=[...this.tasks],this.hasMore=!1,t("log","at pages/tasks/tasks.vue:226","当前显示任务数量:",this.filteredTasks.length),t("log","at pages/tasks/tasks.vue:227","isLoading设置为false")}catch(s){t("error","at pages/tasks/tasks.vue:229","加载任务失败:",s),uni.showToast({title:"加载失败",icon:"none"})}finally{this.isLoading=!1,this.isLoadingMore=!1}},loadMore(){t("log","at pages/tasks/tasks.vue:242","=== loadMore触发调试 ==="),t("log","at pages/tasks/tasks.vue:243","loadMore被调用，hasMore:",this.hasMore),t("log","at pages/tasks/tasks.vue:244","当前滚动位置:",this.scrollTop),t("log","at pages/tasks/tasks.vue:245","是否正在拖拽:",this.isDragging),t("log","at pages/tasks/tasks.vue:246","==================="),this.hasMore&&!this.isLoadingMore&&(this.isLoadingMore=!0,this.page++,this.loadTasks())},toggleTaskExpand(e){this.filteredTasks[e].expanded=!this.filteredTasks[e].expanded},viewTaskDetail(e){uni.navigateTo({url:`/pages/taskDetail/taskDetail?id=${e.id}`})},joinTask(e){uni.showModal({title:"确认参与",content:`确定要参与"${e.name}"任务吗？`,success:t=>{t.confirm&&(e.joined=!0,e.participantCount++,uni.showToast({title:"参与成功",icon:"success"}))}})},onTouchStart(e,t){e.stopPropagation();const s=e.touches[0];if(this.startY=s.clientY,this.currentY=s.clientY,this.startTime=Date.now(),this.isLongPressing=!1,this.hasMoved=!1,this.recordScrollPosition(),this.longPressTimer=setTimeout((()=>{this.hasMoved||(this.isLongPressing=!0,this.startDragging(t))}),this.longPressDuration),!this.itemHeight){uni.createSelectorQuery().in(this).select(".task-item").boundingClientRect((e=>{e&&(this.itemHeight=e.height+16)})).exec()}},onTouchMove(e,s){const a=e.touches[0];Math.abs(a.clientY-this.startY)>this.dragThreshold&&(this.hasMoved=!0),this.isDragging?(e.stopPropagation(),e.preventDefault(),t("log","at pages/tasks/tasks.vue:342","拖拽移动中，当前滚动位置:",this.scrollTop),this.currentY=a.clientY,this.updateDragPosition(a.clientY),this.handleAutoScroll(a.clientY)):this.hasMoved&&!this.isLongPressing&&clearTimeout(this.longPressTimer)},onTouchEnd(e,t){clearTimeout(this.longPressTimer),clearTimeout(this.autoScrollTimer),this.isDragging?this.stopDragging():this.hasMoved||this.isLongPressing||setTimeout((()=>{this.toggleTaskExpand(t)}),50),this.isLongPressing=!1,this.hasMoved=!1},onScroll(e){const s=this.scrollTop;this.scrollTop=e.detail.scrollTop,this.isDragging||(this.autoScrollTarget=this.scrollTop),Math.abs(s-this.scrollTop)>20&&s>0&&(t("log","at pages/tasks/tasks.vue:385","=== 异常滚动检测 ==="),t("log","at pages/tasks/tasks.vue:386","旧滚动位置:",s),t("log","at pages/tasks/tasks.vue:387","新滚动位置:",this.scrollTop),t("log","at pages/tasks/tasks.vue:388","是否正在拖拽:",this.isDragging),t("log","at pages/tasks/tasks.vue:389","滚动差值:",Math.abs(s-this.scrollTop)))},recordScrollPosition(){t("log","at pages/tasks/tasks.vue:396","当前滚动位置:",this.scrollTop)},handleAutoScroll(e){if(!this.isDragging)return;const s=uni.getSystemInfoSync().windowHeight;e<200?(t("log","at pages/tasks/tasks.vue:409","触发向上自动滚动，距离顶部:",e),this.performAutoScrollUp(5)):s-e<200&&(t("log","at pages/tasks/tasks.vue:414","触发向下自动滚动，距离底部:",s-e),this.performAutoScrollDown(5))},performAutoScrollUp(e){if(!this.isDragging)return;let s=this.autoScrollTarget;if(s>0){const a=Math.max(0,s-e);this.autoScrollTarget=a,t("log","at pages/tasks/tasks.vue:429","执行向上滚动:",s,"->",a)}},performAutoScrollDown(e){if(!this.isDragging)return;let s=this.autoScrollTarget;const a=s+e;this.autoScrollTarget=a,t("log","at pages/tasks/tasks.vue:442","执行向下滚动:",s,"->",a)},startDragging(e){t("log","at pages/tasks/tasks.vue:449","=== 开始拖拽调试信息 ==="),t("log","at pages/tasks/tasks.vue:450","拖拽前滚动位置:",this.scrollTop),t("log","at pages/tasks/tasks.vue:451","isDragging变化前:",this.isDragging),this.isDragging=!0,this.draggingIndex=e,this.dragOverIndex=e,this.autoScrollTarget=this.scrollTop,t("log","at pages/tasks/tasks.vue:458","isDragging变化后:",this.isDragging),t("log","at pages/tasks/tasks.vue:459","拖拽后滚动位置:",this.scrollTop);try{uni.vibrateShort({type:"light"})}catch(s){t("log","at pages/tasks/tasks.vue:467","触觉反馈不支持")}uni.showToast({title:"长按拖拽排序中",icon:"none",duration:1500}),t("log","at pages/tasks/tasks.vue:477","开始拖拽任务:",e)},updateDragPosition(e){const t=e-this.startY,s=this.itemHeight||120,a=Math.round(t/s),o=Math.max(0,Math.min(this.filteredTasks.length-1,this.draggingIndex+a));o!==this.dragOverIndex&&(this.dragOverIndex=o)},stopDragging(){t("log","at pages/tasks/tasks.vue:499","=== 停止拖拽调试信息 ==="),t("log","at pages/tasks/tasks.vue:500","停止前滚动位置:",this.scrollTop),t("log","at pages/tasks/tasks.vue:501","停止前自动滚动目标:",this.autoScrollTarget),clearTimeout(this.autoScrollTimer),this.draggingIndex!==this.dragOverIndex&&this.moveTaskToPosition(this.draggingIndex,this.dragOverIndex),this.isDragging=!1,this.draggingIndex=-1,this.dragOverIndex=-1,this.startY=0,this.currentY=0,this.isLongPressing=!1,this.hasMoved=!1,t("log","at pages/tasks/tasks.vue:520","停止后滚动位置:",this.scrollTop),t("log","at pages/tasks/tasks.vue:521","停止后自动滚动目标:",this.autoScrollTarget),t("log","at pages/tasks/tasks.vue:522","已重新启用scroll-view滚动")},getTaskStyle(e){const t={};if(this.isDragging&&e===this.draggingIndex){const e=this.currentY-this.startY;t.transform=`translateY(${e}px) scale(1.05)`,t.zIndex=1e3,t.opacity=.9}else this.isDragging&&e===this.dragOverIndex&&e!==this.draggingIndex&&(t.transform="scale(0.98)",t.backgroundColor="rgba(0, 212, 170, 0.1)");return t},moveTaskToPosition(e,t){if(e===t)return;const s=this.filteredTasks.splice(e,1)[0];this.filteredTasks.splice(t,0,s),this.tasks=[...this.filteredTasks],uni.showToast({title:"任务位置已调整",icon:"success",duration:1500})},formatTime(e){const t=new Date(e),s=new Date-t,a=864e5;if(s<a)return t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});if(s<7*a){return`${Math.floor(s/a)}天前`}return t.toLocaleDateString("zh-CN")},getTypeIconClass:e=>({"学习":"icon-book","运动":"icon-sport","娱乐":"icon-game","工作":"icon-work","生活":"icon-life"}[e]||"icon-default"),generateMockTasks(){const e=["学习","运动","娱乐","工作","生活"],t=["学习Vue3新特性","晨跑锻炼","看电影《星际穿越》","完成项目原型设计","整理房间","学习英语口语","健身房力量训练","和朋友聚餐","准备周会汇报","购买生活用品","阅读《设计心理学》","参加线上技术分享","制作PPT演示文稿","学习摄影技巧","练习瑜伽","编写代码文档","参与开源项目","学习新的编程语言","制定月度计划","整理数字资料"],s=["深入学习Composition API和新的响应式系统","保持身体健康，提升精神状态","放松身心，享受优质的视听体验","运用设计思维，创造用户友好的界面","营造整洁舒适的生活环境","提高语言能力，拓展国际视野","增强体质，塑造理想身材","维护社交关系，分享生活乐趣","展示工作成果，获得团队认可","采购必需品，改善生活质量"],a=["线上","北京市朝阳区","健身房","图书馆","咖啡厅","公园","家中","办公室","社区中心","学校"];return Array.from({length:15},((o,n)=>{const i=n%t.length,l=t[i],c=e[Math.floor(Math.random()*e.length)],r=s[i%s.length];return{id:Date.now()+n+1e3*Math.random(),name:l,type:c,description:r,time:Date.now()-7*Math.random()*24*60*60*1e3,participantCount:Math.floor(50*Math.random())+1,location:a[Math.floor(Math.random()*a.length)],progress:Math.floor(100*Math.random()),joined:Math.random()>.7,expanded:!1,difficulty:["简单","中等","困难"][Math.floor(3*Math.random())],reward:Math.floor(50*Math.random())+10,deadline:Date.now()+14*Math.random()*24*60*60*1e3}}))}},onLoad(){this.loadTasks()},beforeDestroy(){this.longPressTimer&&clearTimeout(this.longPressTimer),this.autoScrollTimer&&clearTimeout(this.autoScrollTimer)}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["tasks-page",{dragging:n.isDragging}])},[e.createElementVNode("view",{class:"header-toolbar"},[e.createElementVNode("button",{class:"btn btn-text",onClick:s[0]||(s[0]=(...e)=>i.resetSort&&i.resetSort(...e))},[e.createElementVNode("text",{class:"iconfont icon-refresh"}),e.createTextVNode(" 恢复初始排序 ")]),e.createElementVNode("button",{class:"btn btn-text",onClick:s[1]||(s[1]=(...e)=>i.showSearch&&i.showSearch(...e))},[e.createElementVNode("text",{class:"iconfont icon-search"}),e.createTextVNode(" 搜索 ")]),e.createElementVNode("text",{class:"sort-tip"},"长按500ms拖拽任务排序")]),n.isSearchVisible?(e.openBlock(),e.createElementBlock("view",{key:0,class:"search-container"},[e.withDirectives(e.createElementVNode("input",{class:"search-input",type:"text",placeholder:"搜索任务...","onUpdate:modelValue":s[2]||(s[2]=e=>n.searchKeyword=e),onInput:s[3]||(s[3]=(...e)=>i.onSearch&&i.onSearch(...e)),onConfirm:s[4]||(s[4]=(...e)=>i.onSearch&&i.onSearch(...e))},null,544),[[e.vModelText,n.searchKeyword]]),e.createElementVNode("button",{class:"btn btn-text",onClick:s[5]||(s[5]=(...e)=>i.hideSearch&&i.hideSearch(...e))},"取消")])):e.createCommentVNode("",!0),e.createElementVNode("scroll-view",{ref:"taskList",class:"task-list","scroll-y":!n.isDragging,onScrolltolower:s[6]||(s[6]=(...e)=>i.loadMore&&i.loadMore(...e)),onScroll:s[7]||(s[7]=(...e)=>i.onScroll&&i.onScroll(...e)),"scroll-top":n.autoScrollTarget},[e.createElementVNode("view",{class:"debug-info",style:{padding:"10px",background:"#f0f0f0",margin:"10px"}},[e.createElementVNode("text",null,"调试: 任务"+e.toDisplayString(n.tasks.length)+"个, 显示"+e.toDisplayString(n.filteredTasks.length)+"个, 加载中:"+e.toDisplayString(n.isLoading)+", hasMore:"+e.toDisplayString(n.hasMore),1)]),n.tasks.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,style:{background:"yellow",padding:"10px",margin:"10px"}},[e.createElementVNode("text",null,"强制测试显示: "+e.toDisplayString(n.tasks[0].name),1)])):e.createCommentVNode("",!0),n.isLoading?(e.openBlock(),e.createElementBlock("view",{key:1,class:"skeleton-container"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(5,(t=>e.createElementVNode("view",{key:t,class:"skeleton-item"},[e.createElementVNode("view",{class:"skeleton skeleton-title"}),e.createElementVNode("view",{class:"skeleton skeleton-content"}),e.createElementVNode("view",{class:"skeleton skeleton-tags"})]))),64))])):e.createCommentVNode("",!0),!n.isLoading&&n.filteredTasks.length>0?(e.openBlock(),e.createElementBlock("view",{key:2,class:"task-items"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.filteredTasks,((t,s)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,"data-index":s,class:e.normalizeClass(["task-item",{expanded:t.expanded,dragging:n.draggingIndex===s,placeholder:n.dragOverIndex===s&&n.draggingIndex!==s}]),style:e.normalizeStyle(i.getTaskStyle(s)),onTouchstart:e=>i.onTouchStart(e,s),onTouchmove:e=>i.onTouchMove(e,s),onTouchend:e=>i.onTouchEnd(e,s)},[e.createElementVNode("view",{class:"task-primary"},[e.createElementVNode("view",{class:"task-time"},e.toDisplayString(i.formatTime(t.time)),1),e.createElementVNode("view",{class:"task-info"},[e.createElementVNode("view",{class:"task-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"task-type"},[e.createElementVNode("text",{class:e.normalizeClass(["task-type-icon",i.getTypeIconClass(t.type)])},null,2),e.createTextVNode(" "+e.toDisplayString(t.type),1)])]),e.createElementVNode("view",{class:e.normalizeClass(["expand-icon",{rotated:t.expanded}])},[e.createElementVNode("text",{class:"iconfont icon-arrow-down"})],2)]),t.expanded?(e.openBlock(),e.createElementBlock("view",{key:0,class:"task-secondary"},[e.createElementVNode("view",{class:"task-description"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"task-meta"},[e.createElementVNode("view",{class:"meta-item"},[e.createElementVNode("text",{class:"iconfont icon-user"}),e.createTextVNode(" "+e.toDisplayString(t.participantCount)+"人参与 ",1)]),t.location?(e.openBlock(),e.createElementBlock("view",{key:0,class:"meta-item"},[e.createElementVNode("text",{class:"iconfont icon-location"}),e.createTextVNode(" "+e.toDisplayString(t.location),1)])):e.createCommentVNode("",!0),t.progress?(e.openBlock(),e.createElementBlock("view",{key:1,class:"meta-item"},[e.createElementVNode("text",{class:"iconfont icon-progress"}),e.createTextVNode(" "+e.toDisplayString(t.progress)+"% ",1)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"task-actions"},[e.createElementVNode("button",{class:"btn btn-secondary",onClick:e.withModifiers((e=>i.viewTaskDetail(t)),["stop"])}," 查看详情 ",8,["onClick"]),t.joined?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary",onClick:e.withModifiers((e=>i.joinTask(t)),["stop"])}," 参与任务 ",8,["onClick"]))])])):e.createCommentVNode("",!0)],46,["data-index","onTouchstart","onTouchmove","onTouchend"])))),128))])):e.createCommentVNode("",!0),n.isLoading||0!==n.filteredTasks.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:3,class:"empty-state"},[e.createElementVNode("view",{class:"empty-icon"},"📝"),e.createElementVNode("view",{class:"empty-text"},"暂无任务"),e.createElementVNode("view",{class:"empty-desc"},"快去发现页面找找有趣的任务吧")])),n.isLoadingMore?(e.openBlock(),e.createElementBlock("view",{key:4,class:"loading-more"},[e.createElementVNode("text",null,"加载中...")])):e.createCommentVNode("",!0)],40,["scroll-y","scroll-top"])],2)}],["__scopeId","data-v-0e276716"]]);const o=s({data:()=>({title:"Hello"}),onLoad(){},methods:{}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createElementVNode("image",{class:"logo",src:"/static/logo.png"}),e.createElementVNode("view",{class:"text-area"},[e.createElementVNode("text",{class:"title"},e.toDisplayString(n.title),1)])])}]]);const n=s({data:()=>({searchKeyword:"",isLoading:!0,isLoadingMore:!1,groups:[],filteredGroups:[],page:1,hasMore:!0}),onLoad(){this.loadGroups()},methods:{onSearch(){this.searchKeyword.trim()?this.filteredGroups=this.groups.filter((e=>e.name.includes(this.searchKeyword)||e.description.includes(this.searchKeyword)||e.tags.some((e=>e.includes(this.searchKeyword))))):this.filteredGroups=[...this.groups]},async loadGroups(e=!1){e&&(this.page=1,this.groups=[],this.isLoading=!0);try{const t=this.generateMockGroups();this.groups=e?t:[...this.groups,...t],this.filteredGroups=[...this.groups],this.hasMore=10===t.length}catch(s){t("error","at pages/groups/groups.vue:138","加载社群失败:",s),uni.showToast({title:"加载失败",icon:"none"})}finally{this.isLoading=!1,this.isLoadingMore=!1}},loadMore(){this.hasMore&&!this.isLoadingMore&&(this.isLoadingMore=!0,this.page++,this.loadGroups())},viewGroupDetail(e){uni.navigateTo({url:`/pages/groupDetail/groupDetail?id=${e.id}`})},toggleJoinGroup(e){e.joined?uni.showModal({title:"确认退出",content:`确定要退出"${e.name}"社群吗？`,success:t=>{t.confirm&&(e.joined=!1,e.memberCount--,uni.showToast({title:"已退出社群",icon:"success"}))}}):e.isPublic?(e.joined=!0,e.memberCount++,uni.showToast({title:"加入成功",icon:"success"})):uni.showModal({title:"申请加入",content:`"${e.name}"是私密社群，需要申请加入`,confirmText:"申请",success:e=>{e.confirm&&uni.showToast({title:"申请已发送",icon:"success"})}})},generateMockGroups(){const e=["前端开发者联盟","健身打卡群","读书分享会","摄影爱好者","创业交流圈","旅行达人","美食探索队","设计师之家","投资理财群","职场进阶"],t=["分享前端技术，交流开发经验","每日打卡，互相监督，一起变强","好书推荐，读后感分享，思维碰撞","摄影技巧分享，作品点评","创业心得，资源对接，合作机会","世界那么大，一起去看看","发现城市美食，分享烹饪心得","设计灵感分享，作品交流","理性投资，财富增值","职业规划，技能提升，经验分享"],s=[["技术","前端","Vue"],["健身","运动","打卡"],["读书","分享","成长"],["摄影","艺术","创作"],["创业","商业","机会"],["旅行","探索","生活"],["美食","烹饪","分享"],["设计","UI","创意"],["投资","理财","财富"],["职场","成长","技能"]],a=["很活跃","较活跃","一般活跃","不太活跃"];return Array.from({length:10},((o,n)=>({id:Date.now()+n,name:e[n%e.length],description:t[n%t.length],avatar:`https://picsum.photos/200/200?random=${n}`,memberCount:Math.floor(1e3*Math.random())+50,isPublic:Math.random()>.3,joined:Math.random()>.8,activityLevel:a[Math.floor(Math.random()*a.length)],tags:s[n%s.length]})))}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"groups-page"},[e.createElementVNode("view",{class:"search-header"},[e.createElementVNode("view",{class:"search-box"},[e.createElementVNode("text",{class:"search-icon"},"🔍"),e.withDirectives(e.createElementVNode("input",{class:"search-input",type:"text",placeholder:"搜索社群","onUpdate:modelValue":s[0]||(s[0]=e=>n.searchKeyword=e),onInput:s[1]||(s[1]=(...e)=>i.onSearch&&i.onSearch(...e)),onConfirm:s[2]||(s[2]=(...e)=>i.onSearch&&i.onSearch(...e))},null,544),[[e.vModelText,n.searchKeyword]])])]),e.createElementVNode("scroll-view",{class:"groups-list","scroll-y":"true",onScrolltolower:s[3]||(s[3]=(...e)=>i.loadMore&&i.loadMore(...e))},[n.isLoading&&0===n.groups.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"skeleton-container"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(5,(t=>e.createElementVNode("view",{key:t,class:"skeleton-item"},[e.createElementVNode("view",{class:"skeleton skeleton-avatar"}),e.createElementVNode("view",{class:"skeleton-content"},[e.createElementVNode("view",{class:"skeleton skeleton-title"}),e.createElementVNode("view",{class:"skeleton skeleton-desc"}),e.createElementVNode("view",{class:"skeleton skeleton-tags"})])]))),64))])):n.filteredGroups.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"group-items"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.filteredGroups,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"group-item",onClick:e=>i.viewGroupDetail(t)},[e.createElementVNode("view",{class:"group-avatar"},[e.createElementVNode("image",{src:t.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"group-info"},[e.createElementVNode("view",{class:"group-header"},[e.createElementVNode("text",{class:"group-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:e.normalizeClass(["group-status",t.isPublic?"public":"private"])},e.toDisplayString(t.isPublic?"公开":"私密"),3)]),e.createElementVNode("view",{class:"group-desc"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"group-meta"},[e.createElementVNode("text",{class:"member-count"},"👥 "+e.toDisplayString(t.memberCount)+"人",1),e.createElementVNode("text",{class:"activity-level"},"🔥 "+e.toDisplayString(t.activityLevel),1),e.createElementVNode("view",{class:"group-tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:"tag"},e.toDisplayString(t),1)))),128))])])]),e.createElementVNode("view",{class:"group-action"},[e.createElementVNode("button",{class:e.normalizeClass(["btn",t.joined?"btn-secondary":"btn-primary"]),onClick:e.withModifiers((e=>i.toggleJoinGroup(t)),["stop"])},e.toDisplayString(t.joined?"已加入":"加入"),11,["onClick"])])],8,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-state"},[e.createElementVNode("view",{class:"empty-icon"},"👥"),e.createElementVNode("view",{class:"empty-text"},"暂无社群"),e.createElementVNode("view",{class:"empty-desc"},"试试搜索感兴趣的社群")])),n.isLoadingMore?(e.openBlock(),e.createElementBlock("view",{key:3,class:"loading-more"},[e.createElementVNode("text",null,"加载中...")])):e.createCommentVNode("",!0)],32)])}],["__scopeId","data-v-5d82a17c"]]);const i=s({data:()=>({isSearchVisible:!1,searchKeyword:"",isLoading:!0,isLoadingMore:!1,showFilterPanel:!1,recommendGroups:[],recommendTasks:[],filteredTasks:[],page:1,hasMore:!0,activeFilters:[],selectedFilters:{types:[],timeRange:"",priceRange:""},taskTypes:["学习","运动","娱乐","工作","生活"],timeRanges:[{label:"今天",value:"today"},{label:"本周",value:"week"},{label:"本月",value:"month"}],priceRanges:[{label:"免费",value:"free"},{label:"50元以下",value:"low"},{label:"50-200元",value:"medium"},{label:"200元以上",value:"high"}]}),onLoad(){this.loadData()},methods:{showSearch(){this.isSearchVisible=!0},hideSearch(){this.isSearchVisible=!1,this.searchKeyword="",this.applySearch()},onSearch(){this.applySearch()},applySearch(){const e=this;this.filteredTasks=this.recommendTasks.filter((function(t){return!e.searchKeyword.trim()||(t.name.includes(e.searchKeyword)||t.description.includes(e.searchKeyword))}))},resetSort(){this.loadData(!0)},showFilterModal(){this.showFilterPanel=!0},closeFilterModal(){this.showFilterPanel=!1},toggleTypeFilter(e){const t=this.selectedFilters.types.indexOf(e);t>-1?this.selectedFilters.types.splice(t,1):this.selectedFilters.types.push(e)},selectTimeRange(e){this.selectedFilters.timeRange=this.selectedFilters.timeRange===e?"":e},selectPriceRange(e){this.selectedFilters.priceRange=this.selectedFilters.priceRange===e?"":e},clearAllFilters(){this.selectedFilters={types:[],timeRange:"",priceRange:""}},applyFilters(){this.updateActiveFilters(),this.applyFilterLogic(),this.closeFilterModal()},updateActiveFilters(){const e=this;if(this.activeFilters=[],this.selectedFilters.types.forEach((function(t){e.activeFilters.push({key:"type-"+t,label:t,type:"type",value:t})})),this.selectedFilters.timeRange){const t=this.timeRanges.find((function(t){return t.value===e.selectedFilters.timeRange})),s=t?t.label:"";e.activeFilters.push({key:"time-"+e.selectedFilters.timeRange,label:s,type:"time",value:e.selectedFilters.timeRange})}if(this.selectedFilters.priceRange){const t=this.priceRanges.find((function(t){return t.value===e.selectedFilters.priceRange})),s=t?t.label:"";e.activeFilters.push({key:"price-"+e.selectedFilters.priceRange,label:s,type:"price",value:e.selectedFilters.priceRange})}},applyFilterLogic(){const e=this;this.filteredTasks=this.recommendTasks.filter((function(t){if(e.selectedFilters.types.length>0&&!e.selectedFilters.types.includes(t.type))return!1;if(e.selectedFilters.priceRange){const s=t.price?t.price.replace("元",""):"0",a=parseFloat(s);switch(e.selectedFilters.priceRange){case"free":if(a>0)return!1;break;case"low":if(0===a||a>=50)return!1;break;case"medium":if(a<50||a>200)return!1;break;case"high":if(a<=200)return!1}}return!0}))},removeFilter(e){if("type"===e.type){const t=this.selectedFilters.types.indexOf(e.value);t>-1&&this.selectedFilters.types.splice(t,1)}else"time"===e.type?this.selectedFilters.timeRange="":"price"===e.type&&(this.selectedFilters.priceRange="");this.updateActiveFilters(),this.applyFilterLogic()},async loadData(e=!1){e&&(this.page=1,this.isLoading=!0);try{const[e,t]=await Promise.all([this.loadRecommendGroups(),this.loadRecommendTasks()]);this.recommendGroups=e,this.recommendTasks=t,this.filteredTasks=[...t],this.hasMore=10===t.length}catch(s){t("error","at pages/discover/discover.vue:423","加载数据失败:",s),uni.showToast({title:"加载失败",icon:"none"})}finally{this.isLoading=!1,this.isLoadingMore=!1}},loadMore(){this.hasMore&&!this.isLoadingMore&&(this.isLoadingMore=!0,this.page++,this.loadData())},loadRecommendGroups:async()=>Array.from({length:5},(function(e,t){return{id:"group-"+t,name:["前端开发者","健身达人","读书会","摄影师","美食家"][t],cover:"https://picsum.photos/300/200?random="+(t+100),joined:Math.random()>.7}})),async loadRecommendTasks(){const e=["学习","运动","娱乐","工作","生活"],t=["Vue3 实战项目开发","晨跑打卡挑战","周末电影观影会","UI设计作品评审","家居整理收纳"],s=["免费","30元","50元","100元","免费","80元","120元","200元"];return Array.from({length:8},(function(a,o){return{id:"task-"+Date.now()+"-"+o,name:t[o%t.length],type:e[Math.floor(Math.random()*e.length)],description:"这是一个关于"+t[o%t.length]+"的详细描述，欢迎大家积极参与。",time:Date.now()+7*Math.random()*24*60*60*1e3,participantCount:Math.floor(30*Math.random())+5,location:Math.random()>.5?"线上":"北京朝阳区",price:Math.random()>.3?s[Math.floor(Math.random()*s.length)]:null,joined:Math.random()>.8}}))},viewMoreGroups(){uni.switchTab({url:"/pages/groups/groups"})},viewMoreTasks(){uni.switchTab({url:"/pages/tasks/tasks"})},viewGroupDetail(e){uni.navigateTo({url:"/pages/groupDetail/groupDetail?id="+e.id})},viewTaskDetail(e){uni.navigateTo({url:"/pages/taskDetail/taskDetail?id="+e.id})},joinGroup(e){e.joined=!e.joined,uni.showToast({title:e.joined?"加入成功":"已退出",icon:"success"})},toggleJoinTask(e){e.joined=!e.joined,e.joined?e.participantCount++:e.participantCount--,uni.showToast({title:e.joined?"参与成功":"已退出",icon:"success"})},formatTime(e){const t=new Date(e),s=new Date,a=t.getTime()-s.getTime();if(a>0){const e=Math.floor(a/864e5);if(e>0)return e+"天后";return Math.floor(a/36e5)+"小时后"}return"已结束"},getTypeClass:e=>({"学习":"type-study","运动":"type-sport","娱乐":"type-entertainment","工作":"type-work","生活":"type-life"}[e]||"type-default"),getTypeIconClass:e=>({"学习":"icon-book","运动":"icon-sport","娱乐":"icon-game","工作":"icon-work","生活":"icon-life"}[e]||"icon-default")}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"discover-page"},[e.createElementVNode("view",{class:"header-toolbar"},[e.createElementVNode("button",{class:"btn btn-text",onClick:s[0]||(s[0]=(...e)=>i.resetSort&&i.resetSort(...e))},[e.createElementVNode("text",{class:"iconfont icon-refresh"}),e.createTextVNode(" 恢复初始排序 ")]),e.createElementVNode("button",{class:"btn btn-text",onClick:s[1]||(s[1]=(...e)=>i.showSearch&&i.showSearch(...e))},[e.createElementVNode("text",{class:"iconfont icon-search"}),e.createTextVNode(" 搜索 ")])]),n.isSearchVisible?(e.openBlock(),e.createElementBlock("view",{key:0,class:"search-container"},[e.withDirectives(e.createElementVNode("input",{class:"search-input",type:"text",placeholder:"搜索任务或社群...","onUpdate:modelValue":s[2]||(s[2]=e=>n.searchKeyword=e),onInput:s[3]||(s[3]=(...e)=>i.onSearch&&i.onSearch(...e)),onConfirm:s[4]||(s[4]=(...e)=>i.onSearch&&i.onSearch(...e))},null,544),[[e.vModelText,n.searchKeyword]]),e.createElementVNode("button",{class:"btn btn-text",onClick:s[5]||(s[5]=(...e)=>i.hideSearch&&i.hideSearch(...e))},"取消")])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"filter-container"},[e.createElementVNode("button",{class:"filter-btn",onClick:s[6]||(s[6]=(...e)=>i.showFilterModal&&i.showFilterModal(...e))},[e.createElementVNode("text",{class:"iconfont icon-filter"}),e.createTextVNode(" 筛选 ")]),n.activeFilters.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"active-filters"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.activeFilters,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.key,class:"filter-tag",onClick:e=>i.removeFilter(t)},[e.createTextVNode(e.toDisplayString(t.label)+" ",1),e.createElementVNode("text",{class:"remove-icon"},"×")],8,["onClick"])))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("scroll-view",{class:"content-scroll","scroll-y":"true",onScrolltolower:s[9]||(s[9]=(...e)=>i.loadMore&&i.loadMore(...e))},[e.createElementVNode("view",{class:"recommend-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"推荐社群"),e.createElementVNode("text",{class:"section-more",onClick:s[7]||(s[7]=(...e)=>i.viewMoreGroups&&i.viewMoreGroups(...e))},"更多 >")]),e.createElementVNode("scroll-view",{class:"recommend-groups","scroll-x":"true","show-scrollbar":"false"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.recommendGroups,(t=>(e.openBlock(),e.createElementBlock("view",{class:"group-card",key:t.id,onClick:e=>i.viewGroupDetail(t)},[e.createElementVNode("image",{src:t.cover,mode:"aspectFill",class:"group-cover"},null,8,["src"]),e.createElementVNode("view",{class:"group-overlay"},[e.createElementVNode("text",{class:"group-name"},e.toDisplayString(t.name),1),e.createElementVNode("button",{class:"btn btn-primary btn-small",onClick:e.withModifiers((e=>i.joinGroup(t)),["stop"])},e.toDisplayString(t.joined?"已加入":"加入"),9,["onClick"])])],8,["onClick"])))),128))])]),e.createElementVNode("view",{class:"recommend-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"推荐任务"),e.createElementVNode("text",{class:"section-more",onClick:s[8]||(s[8]=(...e)=>i.viewMoreTasks&&i.viewMoreTasks(...e))},"更多 >")]),n.isLoading&&0===n.recommendTasks.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"skeleton-container"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(3,(t=>e.createElementVNode("view",{key:t,class:"skeleton-item"},[e.createElementVNode("view",{class:"skeleton skeleton-title"}),e.createElementVNode("view",{class:"skeleton skeleton-content"}),e.createElementVNode("view",{class:"skeleton skeleton-tags"})]))),64))])):n.filteredTasks.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"task-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.filteredTasks,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"task-item",onClick:e=>i.viewTaskDetail(t)},[e.createElementVNode("view",{class:"task-header"},[e.createElementVNode("view",{class:"task-time"},e.toDisplayString(i.formatTime(t.time)),1),e.createElementVNode("view",{class:e.normalizeClass(["task-type",i.getTypeClass(t.type)])},[e.createElementVNode("text",{class:e.normalizeClass(["task-type-icon",i.getTypeIconClass(t.type)])},null,2),e.createTextVNode(" "+e.toDisplayString(t.type),1)],2)]),e.createElementVNode("view",{class:"task-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"task-description"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"task-meta"},[e.createElementVNode("text",{class:"meta-item"},"👥 "+e.toDisplayString(t.participantCount)+"人参与",1),t.location?(e.openBlock(),e.createElementBlock("text",{key:0,class:"meta-item"},"📍 "+e.toDisplayString(t.location),1)):e.createCommentVNode("",!0),t.price?(e.openBlock(),e.createElementBlock("text",{key:1,class:"meta-item"},"💰 "+e.toDisplayString(t.price),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"task-actions"},[e.createElementVNode("button",{class:e.normalizeClass(["btn",t.joined?"btn-secondary":"btn-primary"]),onClick:e.withModifiers((e=>i.toggleJoinTask(t)),["stop"])},e.toDisplayString(t.joined?"已参与":"参与"),11,["onClick"])])],8,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-state"},[e.createElementVNode("view",{class:"empty-icon"},"🔍"),e.createElementVNode("view",{class:"empty-text"},"暂无符合条件的内容"),e.createElementVNode("view",{class:"empty-desc"},"试试调整筛选条件")]))]),n.isLoadingMore?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-more"},[e.createElementVNode("text",null,"加载中...")])):e.createCommentVNode("",!0)],32),n.showFilterPanel?(e.openBlock(),e.createElementBlock("view",{key:1,class:"filter-modal"},[e.createElementVNode("view",{class:"modal-mask",onClick:s[10]||(s[10]=(...e)=>i.closeFilterModal&&i.closeFilterModal(...e))}),e.createElementVNode("view",{class:"modal-content"},[e.createElementVNode("view",{class:"modal-header"},[e.createElementVNode("text",{class:"modal-title"},"筛选条件"),e.createElementVNode("button",{class:"btn btn-text",onClick:s[11]||(s[11]=(...e)=>i.clearAllFilters&&i.clearAllFilters(...e))},"清空")]),e.createElementVNode("view",{class:"filter-section"},[e.createElementVNode("text",{class:"filter-label"},"类型"),e.createElementVNode("view",{class:"filter-options"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.taskTypes,(t=>(e.openBlock(),e.createElementBlock("button",{key:t,class:e.normalizeClass(["filter-option",{active:n.selectedFilters.types.includes(t)}]),onClick:e=>i.toggleTypeFilter(t)},e.toDisplayString(t),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"filter-section"},[e.createElementVNode("text",{class:"filter-label"},"时间"),e.createElementVNode("view",{class:"filter-options"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.timeRanges,(t=>(e.openBlock(),e.createElementBlock("button",{key:t.value,class:e.normalizeClass(["filter-option",{active:n.selectedFilters.timeRange===t.value}]),onClick:e=>i.selectTimeRange(t.value)},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"filter-section"},[e.createElementVNode("text",{class:"filter-label"},"费用"),e.createElementVNode("view",{class:"filter-options"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.priceRanges,(t=>(e.openBlock(),e.createElementBlock("button",{key:t.value,class:e.normalizeClass(["filter-option",{active:n.selectedFilters.priceRange===t.value}]),onClick:e=>i.selectPriceRange(t.value)},e.toDisplayString(t.label),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"modal-actions"},[e.createElementVNode("button",{class:"btn btn-secondary",onClick:s[12]||(s[12]=(...e)=>i.closeFilterModal&&i.closeFilterModal(...e))},"取消"),e.createElementVNode("button",{class:"btn btn-primary",onClick:s[13]||(s[13]=(...e)=>i.applyFilters&&i.applyFilters(...e))},"确定")])])])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-318c2dc0"]]);const l=s({data:()=>({userInfo:{name:"用户昵称",id:"123456789",avatar:"https://picsum.photos/200/200?random=999",level:"Lv.5",creditLevel:"A",memberType:"黄金会员",friendsCount:128},statsData:{myGroups:8,myTasks:15,achievements:12,following:45}}),onLoad(){this.loadUserData()},onShow(){this.loadUserData()},methods:{async loadUserData(){},navigateTo(e){uni.navigateTo({url:e,fail:s=>{t("warn","at pages/me/me.vue:250","页面跳转失败:",e,s),uni.showToast({title:"功能开发中",icon:"none"})}})},contactSupport(){uni.showActionSheet({itemList:["在线客服","电话客服","邮件反馈"],success:e=>{switch(e.tapIndex){case 0:this.navigateTo("/pages/chat/chat?type=support");break;case 1:uni.makePhoneCall({phoneNumber:"400-123-4567"});break;case 2:this.navigateTo("/pages/feedback/feedback?type=email")}}})},switchAccount(){uni.showModal({title:"切换账号",content:"确定要切换到其他账号吗？",success:e=>{e.confirm&&(uni.removeStorageSync("userToken"),uni.reLaunch({url:"/pages/login/login"}))}})},logout(){uni.showModal({title:"退出登录",content:"确定要退出当前账号吗？",confirmColor:"#ff4757",success:e=>{e.confirm&&(uni.clearStorageSync(),uni.showToast({title:"已退出登录",icon:"success"}),setTimeout((()=>{uni.reLaunch({url:"/pages/login/login"})}),1500))}})},getLevelClass(e){const t=parseInt(e.replace("Lv.",""));return t>=10?"level-high":t>=5?"level-medium":"level-low"}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"me-page"},[e.createElementVNode("view",{class:"user-info-section"},[e.createElementVNode("view",{class:"user-profile"},[e.createElementVNode("view",{class:"avatar-wrapper"},[e.createElementVNode("image",{src:n.userInfo.avatar,mode:"aspectFill",class:"user-avatar"},null,8,["src"]),e.createElementVNode("view",{class:e.normalizeClass(["level-badge",i.getLevelClass(n.userInfo.level)])},e.toDisplayString(n.userInfo.level),3)]),e.createElementVNode("view",{class:"user-details"},[e.createElementVNode("text",{class:"user-name"},e.toDisplayString(n.userInfo.name),1),e.createElementVNode("text",{class:"user-id"},"ID: "+e.toDisplayString(n.userInfo.id),1),e.createElementVNode("view",{class:"user-badges"},[n.userInfo.creditLevel?(e.openBlock(),e.createElementBlock("view",{key:0,class:"badge credit-badge"},[e.createElementVNode("text",{class:"badge-icon"},"⭐"),e.createElementVNode("text",{class:"badge-text"},"信用等级"+e.toDisplayString(n.userInfo.creditLevel),1)])):e.createCommentVNode("",!0),n.userInfo.memberType?(e.openBlock(),e.createElementBlock("view",{key:1,class:"badge member-badge"},[e.createElementVNode("text",{class:"badge-icon"},"👑"),e.createElementVNode("text",{class:"badge-text"},e.toDisplayString(n.userInfo.memberType),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("view",{class:"quick-entries"},[e.createElementVNode("view",{class:"entry-item",onClick:s[0]||(s[0]=e=>i.navigateTo("/pages/friends/friends"))},[e.createElementVNode("text",{class:"entry-icon"},"👥"),e.createElementVNode("text",{class:"entry-text"},"我的好友"),n.userInfo.friendsCount?(e.openBlock(),e.createElementBlock("text",{key:0,class:"entry-count"},e.toDisplayString(n.userInfo.friendsCount),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"entry-item",onClick:s[1]||(s[1]=e=>i.navigateTo("/pages/settings/settings"))},[e.createElementVNode("text",{class:"entry-icon"},"⚙️"),e.createElementVNode("text",{class:"entry-text"},"设置")]),e.createElementVNode("view",{class:"entry-item",onClick:s[2]||(s[2]=(...e)=>i.contactSupport&&i.contactSupport(...e))},[e.createElementVNode("text",{class:"entry-icon"},"💬"),e.createElementVNode("text",{class:"entry-text"},"联系客服")])])]),e.createElementVNode("scroll-view",{class:"function-list","scroll-y":"true"},[e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"我的内容"),e.createElementVNode("view",{class:"function-items"},[e.createElementVNode("view",{class:"function-item",onClick:s[3]||(s[3]=e=>i.navigateTo("/pages/myGroups/myGroups"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🏠"),e.createElementVNode("text",{class:"item-text"},"我的社群")]),e.createElementVNode("view",{class:"item-right"},[n.statsData.myGroups?(e.openBlock(),e.createElementBlock("text",{key:0,class:"item-count"},e.toDisplayString(n.statsData.myGroups),1)):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[4]||(s[4]=e=>i.navigateTo("/pages/myTasks/myTasks"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"📝"),e.createElementVNode("text",{class:"item-text"},"我的任务")]),e.createElementVNode("view",{class:"item-right"},[n.statsData.myTasks?(e.openBlock(),e.createElementBlock("text",{key:0,class:"item-count"},e.toDisplayString(n.statsData.myTasks),1)):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[5]||(s[5]=e=>i.navigateTo("/pages/schedule/schedule"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"📅"),e.createElementVNode("text",{class:"item-text"},"日程表")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])])])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"社交功能"),e.createElementVNode("view",{class:"function-items"},[e.createElementVNode("view",{class:"function-item",onClick:s[6]||(s[6]=e=>i.navigateTo("/pages/invite/invite"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🎁"),e.createElementVNode("text",{class:"item-text"},"邀请好友")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-badge"},"有奖励"),e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[7]||(s[7]=e=>i.navigateTo("/pages/achievements/achievements"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🏆"),e.createElementVNode("text",{class:"item-text"},"成就徽章")]),e.createElementVNode("view",{class:"item-right"},[n.statsData.achievements?(e.openBlock(),e.createElementBlock("text",{key:0,class:"item-count"},e.toDisplayString(n.statsData.achievements),1)):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[8]||(s[8]=e=>i.navigateTo("/pages/following/following"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"❤️"),e.createElementVNode("text",{class:"item-text"},"我的关注")]),e.createElementVNode("view",{class:"item-right"},[n.statsData.following?(e.openBlock(),e.createElementBlock("text",{key:0,class:"item-count"},e.toDisplayString(n.statsData.following),1)):e.createCommentVNode("",!0),e.createElementVNode("text",{class:"item-arrow"},">")])])])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"工具与帮助"),e.createElementVNode("view",{class:"function-items"},[e.createElementVNode("view",{class:"function-item",onClick:s[9]||(s[9]=e=>i.navigateTo("/pages/feedback/feedback"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"💡"),e.createElementVNode("text",{class:"item-text"},"反馈建议")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[10]||(s[10]=e=>i.navigateTo("/pages/help/help"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"❓"),e.createElementVNode("text",{class:"item-text"},"帮助中心")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[11]||(s[11]=e=>i.navigateTo("/pages/about/about"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"ℹ️"),e.createElementVNode("text",{class:"item-text"},"关于我们")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])])])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"账号管理"),e.createElementVNode("view",{class:"function-items"},[e.createElementVNode("view",{class:"function-item",onClick:s[12]||(s[12]=e=>i.navigateTo("/pages/privacy/privacy"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🔒"),e.createElementVNode("text",{class:"item-text"},"隐私设置")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[13]||(s[13]=e=>i.navigateTo("/pages/security/security"))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🛡️"),e.createElementVNode("text",{class:"item-text"},"账号安全")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])]),e.createElementVNode("view",{class:"function-item",onClick:s[14]||(s[14]=(...e)=>i.switchAccount&&i.switchAccount(...e))},[e.createElementVNode("view",{class:"item-left"},[e.createElementVNode("text",{class:"item-icon"},"🔄"),e.createElementVNode("text",{class:"item-text"},"切换账号")]),e.createElementVNode("view",{class:"item-right"},[e.createElementVNode("text",{class:"item-arrow"},">")])])])])]),e.createElementVNode("view",{class:"logout-section"},[e.createElementVNode("button",{class:"logout-btn",onClick:s[15]||(s[15]=(...e)=>i.logout&&i.logout(...e))},"退出登录")])])}],["__scopeId","data-v-a61f59d2"]]);const c=s({data:()=>({isLoading:!0,taskId:"",taskDetail:null}),onLoad(e){this.taskId=e.id,this.loadTaskDetail()},methods:{async loadTaskDetail(){this.isLoading=!0;try{this.taskDetail={id:this.taskId,name:"Vue3 实战项目开发",type:"学习",description:"通过实际项目开发学习Vue3的新特性，包括Composition API、Teleport、Fragments等。我们将一起构建一个完整的Web应用，从项目搭建到部署上线。适合有一定Vue基础的开发者参与。",time:Date.now()+1728e5,participantCount:28,location:"线上",joined:!1,attachments:[{id:1,name:"Vue3开发指南.pdf",size:"2.5MB"},{id:2,name:"项目需求文档.docx",size:"1.2MB"}],checkpoints:[{id:1,title:"环境搭建",description:"安装Node.js、Vue CLI等开发环境",completed:!0},{id:2,title:"项目初始化",description:"创建Vue3项目，配置路由和状态管理",completed:!0},{id:3,title:"组件开发",description:"使用Composition API开发核心组件",completed:!1},{id:4,title:"功能测试",description:"编写单元测试和集成测试",completed:!1}],participants:[{id:1,name:"张三",avatar:"https://picsum.photos/100/100?random=1"},{id:2,name:"李四",avatar:"https://picsum.photos/100/100?random=2"},{id:3,name:"王五",avatar:"https://picsum.photos/100/100?random=3"}]}}catch(e){t("error","at pages/taskDetail/taskDetail.vue:198","加载任务详情失败:",e),uni.showToast({title:"加载失败",icon:"none"})}finally{this.isLoading=!1}},formatTime:e=>new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),getTypeClass:e=>({"学习":"type-study","运动":"type-sport","娱乐":"type-entertainment","工作":"type-work","生活":"type-life"}[e]||"type-default"),previewAttachment(e){uni.showToast({title:`预览${e.name}`,icon:"none"})},openChat(){uni.navigateTo({url:`/pages/chat/chat?taskId=${this.taskId}&type=task`})},toggleJoin(){this.taskDetail.joined?uni.showModal({title:"确认退出",content:"确定要退出这个任务吗？",success:e=>{e.confirm&&(this.taskDetail.joined=!1,this.taskDetail.participantCount--,uni.showToast({title:"已退出任务",icon:"success"}))}}):(this.taskDetail.joined=!0,this.taskDetail.participantCount++,uni.showToast({title:"参与成功",icon:"success"}))}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"task-detail-page"},[n.isLoading?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-container"},[e.createElementVNode("text",null,"加载中...")])):n.taskDetail?(e.openBlock(),e.createElementBlock("view",{key:1,class:"task-content"},[e.createElementVNode("view",{class:"task-header"},[e.createElementVNode("view",{class:"task-title"},e.toDisplayString(n.taskDetail.name),1),e.createElementVNode("view",{class:"task-meta"},[e.createElementVNode("view",{class:"meta-item"},[e.createElementVNode("text",{class:"meta-icon"},"⏰"),e.createElementVNode("text",null,e.toDisplayString(i.formatTime(n.taskDetail.time)),1)]),e.createElementVNode("view",{class:"meta-item"},[e.createElementVNode("text",{class:"meta-icon"},"👥"),e.createElementVNode("text",null,e.toDisplayString(n.taskDetail.participantCount)+"人参与",1)]),n.taskDetail.location?(e.openBlock(),e.createElementBlock("view",{key:0,class:"meta-item"},[e.createElementVNode("text",{class:"meta-icon"},"📍"),e.createElementVNode("text",null,e.toDisplayString(n.taskDetail.location),1)])):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:e.normalizeClass(["task-type-badge",i.getTypeClass(n.taskDetail.type)])},e.toDisplayString(n.taskDetail.type),3)]),e.createElementVNode("view",{class:"task-description"},[e.createElementVNode("text",{class:"section-title"},"任务描述"),e.createElementVNode("text",{class:"description-text"},e.toDisplayString(n.taskDetail.description),1)]),n.taskDetail.attachments&&n.taskDetail.attachments.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"attachments-section"},[e.createElementVNode("text",{class:"section-title"},"相关附件"),e.createElementVNode("view",{class:"attachment-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.taskDetail.attachments,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"attachment-item",onClick:e=>i.previewAttachment(t)},[e.createElementVNode("text",{class:"attachment-icon"},"📎"),e.createElementVNode("text",{class:"attachment-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"attachment-size"},e.toDisplayString(t.size),1)],8,["onClick"])))),128))])])):e.createCommentVNode("",!0),n.taskDetail.checkpoints&&n.taskDetail.checkpoints.length>0?(e.openBlock(),e.createElementBlock("view",{key:1,class:"checkpoints-section"},[e.createElementVNode("text",{class:"section-title"},"任务节点"),e.createElementVNode("view",{class:"checkpoint-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.taskDetail.checkpoints,((t,s)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:e.normalizeClass(["checkpoint-item",{completed:t.completed}])},[e.createElementVNode("view",{class:"checkpoint-index"},e.toDisplayString(s+1),1),e.createElementVNode("view",{class:"checkpoint-content"},[e.createElementVNode("text",{class:"checkpoint-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"checkpoint-desc"},e.toDisplayString(t.description),1)]),e.createElementVNode("view",{class:"checkpoint-status"},[t.completed?(e.openBlock(),e.createElementBlock("text",{key:0},"✅")):(e.openBlock(),e.createElementBlock("text",{key:1},"⭕"))])],2)))),128))])])):e.createCommentVNode("",!0),n.taskDetail.participants&&n.taskDetail.participants.length>0?(e.openBlock(),e.createElementBlock("view",{key:2,class:"participants-section"},[e.createElementVNode("text",{class:"section-title"},"参与者（"+e.toDisplayString(n.taskDetail.participants.length)+"人）",1),e.createElementVNode("view",{class:"participants-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.taskDetail.participants,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"participant-item"},[e.createElementVNode("image",{src:t.avatar,mode:"aspectFill",class:"participant-avatar"},null,8,["src"]),e.createElementVNode("text",{class:"participant-name"},e.toDisplayString(t.name),1)])))),128))])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"bottom-actions"},[e.createElementVNode("button",{class:"action-btn chat-btn",onClick:s[0]||(s[0]=(...e)=>i.openChat&&i.openChat(...e))}," 💬 进入聊天室 "),e.createElementVNode("button",{class:e.normalizeClass(["action-btn join-btn",{joined:n.taskDetail&&n.taskDetail.joined}]),onClick:s[1]||(s[1]=(...e)=>i.toggleJoin&&i.toggleJoin(...e))},e.toDisplayString(n.taskDetail&&n.taskDetail.joined?"已参与":"参与任务"),3)])])}],["__scopeId","data-v-340e2ae2"]]);const r=s({data:()=>({groupInfo:{id:1,name:"产品设计交流群",description:"分享设计心得，探讨产品趋势",fullDescription:"这是一个专注于产品设计的交流社群，我们在这里分享最新的设计理念、讨论产品趋势、交流设计心得。欢迎所有对产品设计感兴趣的朋友加入我们！",avatar:"https://via.placeholder.com/80x80/00D4AA/FFFFFF?text=群",memberCount:156,isPublic:!0},isJoined:!1,members:[]}),onLoad(e){e.id&&this.loadGroupDetail(e.id),this.generateMembers()},methods:{loadGroupDetail(e){t("log","at pages/groupDetail/groupDetail.vue:65","加载社群详情:",e)},toggleJoin(){this.isJoined=!this.isJoined,this.isJoined?this.groupInfo.memberCount++:this.groupInfo.memberCount--},generateMembers(){this.members=["张三","李四","王五","赵六","孙七","周八"].map(((e,t)=>({id:t+1,name:e,avatar:"https://via.placeholder.com/32x32/4A90E2/FFFFFF?text="+e.charAt(0)})))}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"group-info"},[e.createElementVNode("image",{class:"group-avatar",src:n.groupInfo.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"name"},e.toDisplayString(n.groupInfo.name),1),e.createElementVNode("text",{class:"desc"},e.toDisplayString(n.groupInfo.description),1),e.createElementVNode("view",{class:"stats"},[e.createElementVNode("text",{class:"stat"},e.toDisplayString(n.groupInfo.memberCount)+"人",1),e.createElementVNode("text",{class:"stat"},e.toDisplayString(n.groupInfo.isPublic?"公开":"私密"),1)])])]),e.createElementVNode("button",{class:e.normalizeClass(["join-btn",{joined:n.isJoined}]),onClick:s[0]||(s[0]=(...e)=>i.toggleJoin&&i.toggleJoin(...e))},e.toDisplayString(n.isJoined?"已加入":"加入社群"),3)]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"社群简介"),e.createElementVNode("text",{class:"section-content"},e.toDisplayString(n.groupInfo.fullDescription),1)]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("text",{class:"section-title"},"成员 ("+e.toDisplayString(n.groupInfo.memberCount)+")",1),e.createElementVNode("view",{class:"members"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.members,(t=>(e.openBlock(),e.createElementBlock("view",{class:"member",key:t.id},[e.createElementVNode("image",{class:"member-avatar",src:t.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("text",{class:"member-name"},e.toDisplayString(t.name),1)])))),128))])])])])}],["__scopeId","data-v-1ecc96b8"]]);const d=s({data:()=>({messages:[],inputText:"",scrollTop:0,showEmoji:!1,chatType:"task",chatId:"",currentUser:{id:"user123",name:"我",avatar:"https://picsum.photos/100/100?random=999"},emojiList:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","👍","👎","👌","✌️","🤞","🤟","🤘","🤙","💪","🙏","✨","🎉","🎊","💯","❤️","💛"]}),onLoad(e){this.chatType=e.type||"task",this.chatId=e.taskId||e.groupId||"support",this.loadMessages()},methods:{async loadMessages(){try{this.messages=[{id:1,type:"system",content:"欢迎加入聊天室",time:Date.now()-36e5,showTime:!0},{id:2,type:"text",content:"大家好，我是张三，很高兴和大家一起学习Vue3！",time:Date.now()-35e5,isMine:!1,userId:"user1",userName:"张三",avatar:"https://picsum.photos/100/100?random=1"},{id:3,type:"text",content:"欢迎欢迎！我们一起加油💪",time:Date.now()-34e5,isMine:!0,userId:this.currentUser.id,userName:this.currentUser.name,avatar:this.currentUser.avatar},{id:4,type:"text",content:"我准备了一些学习资料，等会分享给大家",time:Date.now()-33e5,isMine:!1,userId:"user2",userName:"李四",avatar:"https://picsum.photos/100/100?random=2"},{id:5,type:"image",content:"https://picsum.photos/300/200?random=10",time:Date.now()-32e5,isMine:!1,userId:"user2",userName:"李四",avatar:"https://picsum.photos/100/100?random=2"}],this.$nextTick((()=>{this.scrollToBottom()}))}catch(e){t("error","at pages/chat/chat.vue:193","加载消息失败:",e)}},sendMessage(){if(!this.inputText.trim())return;const e={id:Date.now(),type:"text",content:this.inputText.trim(),time:Date.now(),isMine:!0,userId:this.currentUser.id,userName:this.currentUser.name,avatar:this.currentUser.avatar};this.messages.push(e),this.inputText="",this.showEmoji=!1,this.$nextTick((()=>{this.scrollToBottom()})),setTimeout((()=>{this.simulateReply()}),1e3)},simulateReply(){const e=["收到！","好的，明白了","赞同👍","这个想法不错","我也是这么想的"],t={id:Date.now(),type:"text",content:e[Math.floor(Math.random()*e.length)],time:Date.now(),isMine:!1,userId:"user3",userName:"王五",avatar:"https://picsum.photos/100/100?random=3"};this.messages.push(t),this.$nextTick((()=>{this.scrollToBottom()}))},selectImage(){uni.chooseImage({count:1,success:e=>{const t=e.tempFilePaths[0];this.sendImageMessage(t)}})},sendImageMessage(e){const t={id:Date.now(),type:"image",content:e,time:Date.now(),isMine:!0,userId:this.currentUser.id,userName:this.currentUser.name,avatar:this.currentUser.avatar};this.messages.push(t),this.$nextTick((()=>{this.scrollToBottom()}))},selectFile(){const e={id:Date.now(),type:"file",content:"",fileName:"项目文档.pdf",fileSize:"2.5MB",time:Date.now(),isMine:!0,userId:this.currentUser.id,userName:this.currentUser.name,avatar:this.currentUser.avatar};this.messages.push(e),this.$nextTick((()=>{this.scrollToBottom()}))},previewImage(e){uni.previewImage({urls:[e]})},downloadFile(e){uni.showToast({title:`下载${e.fileName}`,icon:"none"})},showEmojiPanel(){this.showEmoji=!this.showEmoji},insertEmoji(e){this.inputText+=e},onInputFocus(){this.showEmoji=!1},onInputBlur(){},scrollToBottom(){this.scrollTop=999999},formatTime(e){const t=new Date(e),s=new Date-t,a=864e5;return s<6e4?"刚刚":s<a?t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):s<2*a?"昨天 "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("zh-CN")}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"chat-page"},[e.createElementVNode("scroll-view",{class:"message-list","scroll-y":"true","scroll-top":n.scrollTop,"scroll-with-animation":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.messages,(t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"message-item"},[t.showTime?(e.openBlock(),e.createElementBlock("view",{key:0,class:"time-divider"},[e.createElementVNode("text",{class:"time-text"},e.toDisplayString(i.formatTime(t.time)),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["message-wrapper",{"is-mine":t.isMine}])},[t.isMine?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:0,src:t.avatar,mode:"aspectFill",class:"user-avatar"},null,8,["src"])),e.createElementVNode("view",{class:e.normalizeClass(["message-bubble",{mine:t.isMine}])},["text"===t.type?(e.openBlock(),e.createElementBlock("text",{key:0,class:"message-text"},e.toDisplayString(t.content),1)):"image"===t.type?(e.openBlock(),e.createElementBlock("view",{key:1,class:"message-image"},[e.createElementVNode("image",{src:t.content,mode:"aspectFill",onClick:e=>i.previewImage(t.content)},null,8,["src","onClick"])])):"file"===t.type?(e.openBlock(),e.createElementBlock("view",{key:2,class:"message-file",onClick:e=>i.downloadFile(t)},[e.createElementVNode("text",{class:"file-icon"},"📎"),e.createElementVNode("view",{class:"file-info"},[e.createElementVNode("text",{class:"file-name"},e.toDisplayString(t.fileName),1),e.createElementVNode("text",{class:"file-size"},e.toDisplayString(t.fileSize),1)])],8,["onClick"])):"system"===t.type?(e.openBlock(),e.createElementBlock("text",{key:3,class:"system-text"},e.toDisplayString(t.content),1)):e.createCommentVNode("",!0)],2),t.isMine?(e.openBlock(),e.createElementBlock("image",{key:1,src:t.avatar,mode:"aspectFill",class:"user-avatar"},null,8,["src"])):e.createCommentVNode("",!0)],2)])))),128))],8,["scroll-top"]),e.createElementVNode("view",{class:"input-area"},[e.createElementVNode("view",{class:"toolbar"},[e.createElementVNode("button",{class:"tool-btn",onClick:s[0]||(s[0]=(...e)=>i.selectImage&&i.selectImage(...e))},[e.createElementVNode("text",{class:"tool-icon"},"📷")]),e.createElementVNode("button",{class:"tool-btn",onClick:s[1]||(s[1]=(...e)=>i.selectFile&&i.selectFile(...e))},[e.createElementVNode("text",{class:"tool-icon"},"📎")]),e.createElementVNode("button",{class:"tool-btn",onClick:s[2]||(s[2]=(...e)=>i.showEmojiPanel&&i.showEmojiPanel(...e))},[e.createElementVNode("text",{class:"tool-icon"},"😊")])]),e.createElementVNode("view",{class:"input-container"},[e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":s[3]||(s[3]=e=>n.inputText=e),class:"message-input",placeholder:"输入消息...","auto-height":!0,"show-confirm-bar":!1,onFocus:s[4]||(s[4]=(...e)=>i.onInputFocus&&i.onInputFocus(...e)),onBlur:s[5]||(s[5]=(...e)=>i.onInputBlur&&i.onInputBlur(...e))},null,544),[[e.vModelText,n.inputText]]),e.createElementVNode("button",{class:e.normalizeClass(["send-btn",{active:n.inputText.trim()}]),onClick:s[6]||(s[6]=(...e)=>i.sendMessage&&i.sendMessage(...e)),disabled:!n.inputText.trim()}," 发送 ",10,["disabled"])]),n.showEmoji?(e.openBlock(),e.createElementBlock("view",{key:0,class:"emoji-panel"},[e.createElementVNode("view",{class:"emoji-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.emojiList,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:"emoji-item",onClick:e=>i.insertEmoji(t)},e.toDisplayString(t),9,["onClick"])))),128))])])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-f07c6649"]]);const m=s({data:()=>({myGroups:[]}),onLoad(){this.loadMyGroups()},methods:{loadMyGroups(){this.myGroups=[{id:1,name:"产品设计交流群",description:"分享设计心得，探讨产品趋势",avatar:"https://via.placeholder.com/60x60/00D4AA/FFFFFF?text=设",memberCount:156,lastMessage:"有新的设计分享"},{id:2,name:"前端开发学习",description:"一起学习前端技术",avatar:"https://via.placeholder.com/60x60/FF6B6B/FFFFFF?text=前",memberCount:89,lastMessage:"新的技术文章推荐"}]},viewGroupDetail(e){uni.navigateTo({url:`/pages/groupDetail/groupDetail?id=${e.id}`})},exploreGroups(){uni.switchTab({url:"/pages/groups/groups"})}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"我的社群")]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"groups-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.myGroups,(t=>(e.openBlock(),e.createElementBlock("view",{class:"group-item",key:t.id,onClick:e=>i.viewGroupDetail(t)},[e.createElementVNode("image",{class:"group-avatar",src:t.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"group-info"},[e.createElementVNode("text",{class:"group-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"group-desc"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"group-meta"},[e.createElementVNode("text",{class:"member-count"},e.toDisplayString(t.memberCount)+"人",1),e.createElementVNode("text",{class:"last-message"},e.toDisplayString(t.lastMessage),1)])])],8,["onClick"])))),128))]),0===n.myGroups.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"还没有加入任何社群"),e.createElementVNode("button",{class:"explore-btn",onClick:s[0]||(s[0]=(...e)=>i.exploreGroups&&i.exploreGroups(...e))},"去发现社群")])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-ef22cb4b"]]);const p=s({data:()=>({currentTab:"ongoing",ongoingTasks:[],completedTasks:[]}),onLoad(){this.loadMyTasks()},methods:{loadMyTasks(){this.ongoingTasks=[{id:1,name:"学习Vue3新特性",description:"深入学习Vue3的Composition API",progress:75,deadline:Date.now()+6048e5,location:"线上"},{id:2,name:"晨跑锻炼",description:"每天早上7点晨跑30分钟",progress:60,deadline:Date.now()+2592e5,location:"公园"}],this.completedTasks=[{id:3,name:"阅读《设计心理学》",description:"完整阅读并做读书笔记",completedTime:Date.now()-1728e5}]},switchTab(e){this.currentTab=e},getCurrentTasks(){return"ongoing"===this.currentTab?this.ongoingTasks:this.completedTasks},viewTaskDetail(e){uni.navigateTo({url:`/pages/taskDetail/taskDetail?id=${e.id}`})},exploreTasks(){uni.switchTab({url:"/pages/tasks/tasks"})},formatDate:e=>new Date(e).toLocaleDateString("zh-CN")}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"我的任务")]),e.createElementVNode("view",{class:"tabs"},[e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"ongoing"===n.currentTab}]),onClick:s[0]||(s[0]=e=>i.switchTab("ongoing"))},[e.createElementVNode("text",null,"进行中"),n.ongoingTasks.length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"count"},"("+e.toDisplayString(n.ongoingTasks.length)+")",1)):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"completed"===n.currentTab}]),onClick:s[1]||(s[1]=e=>i.switchTab("completed"))},[e.createElementVNode("text",null,"已完成"),n.completedTasks.length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"count"},"("+e.toDisplayString(n.completedTasks.length)+")",1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("view",{class:"content"},["ongoing"===n.currentTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"tasks-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.ongoingTasks,(t=>(e.openBlock(),e.createElementBlock("view",{class:"task-item",key:t.id,onClick:e=>i.viewTaskDetail(t)},[e.createElementVNode("view",{class:"task-header"},[e.createElementVNode("text",{class:"task-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"task-progress"},[e.createElementVNode("text",{class:"progress-text"},e.toDisplayString(t.progress)+"%",1)])]),e.createElementVNode("text",{class:"task-desc"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"task-meta"},[e.createElementVNode("text",{class:"deadline"},"截止："+e.toDisplayString(i.formatDate(t.deadline)),1),e.createElementVNode("text",{class:"location"},e.toDisplayString(t.location),1)])],8,["onClick"])))),128))])):e.createCommentVNode("",!0),"completed"===n.currentTab?(e.openBlock(),e.createElementBlock("view",{key:1,class:"tasks-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.completedTasks,(t=>(e.openBlock(),e.createElementBlock("view",{class:"task-item completed",key:t.id,onClick:e=>i.viewTaskDetail(t)},[e.createElementVNode("view",{class:"task-header"},[e.createElementVNode("text",{class:"task-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"completed-tag"},"已完成")]),e.createElementVNode("text",{class:"task-desc"},e.toDisplayString(t.description),1),e.createElementVNode("view",{class:"task-meta"},[e.createElementVNode("text",{class:"completed-time"},"完成时间："+e.toDisplayString(i.formatDate(t.completedTime)),1)])],8,["onClick"])))),128))])):e.createCommentVNode("",!0),0===i.getCurrentTasks().length?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},e.toDisplayString("ongoing"===n.currentTab?"暂无进行中的任务":"暂无已完成的任务"),1),e.createElementVNode("button",{class:"explore-btn",onClick:s[2]||(s[2]=(...e)=>i.exploreTasks&&i.exploreTasks(...e))},"去发现任务")])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-6766dfbd"]]);const h=s({data:()=>({currentDate:new Date,selectedDate:new Date,weekDays:["日","一","二","三","四","五","六"],schedules:{},calendarDays:[]}),computed:{currentMonth(){return`${this.currentDate.getFullYear()}年${this.currentDate.getMonth()+1}月`},selectedDateText(){const e=this.selectedDate;return`${e.getMonth()+1}月${e.getDate()}日`},selectedDaySchedules(){const e=this.formatDateKey(this.selectedDate);return this.schedules[e]||[]}},onLoad(){this.initCalendar(),this.loadSchedules()},methods:{initCalendar(){this.generateCalendarDays()},generateCalendarDays(){const e=this.currentDate.getFullYear(),t=this.currentDate.getMonth(),s=new Date(e,t,1),a=new Date(s);a.setDate(a.getDate()-s.getDay());const o=[],n=new Date;for(let i=0;i<42;i++){const e=new Date(a);e.setDate(a.getDate()+i);const s=this.formatDateKey(e),l=this.schedules[s]&&this.schedules[s].length>0;o.push({date:e.getTime(),day:e.getDate(),isToday:this.isSameDay(e,n),isSelected:this.isSameDay(e,this.selectedDate),hasEvent:l,isCurrentMonth:e.getMonth()===t})}this.calendarDays=o},selectDay(e){this.selectedDate=new Date(e.date),this.generateCalendarDays()},prevMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.generateCalendarDays()},nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.generateCalendarDays()},loadSchedules(){const e=new Date,t=new Date(e);t.setDate(e.getDate()+1),this.schedules={[this.formatDateKey(e)]:[{id:1,time:"09:00",title:"团队会议",description:"讨论项目进度"},{id:2,time:"14:00",title:"学习Vue3",description:"深入学习Composition API"}],[this.formatDateKey(t)]:[{id:3,time:"10:00",title:"健身运动",description:"在健身房进行力量训练"}]},this.generateCalendarDays()},addSchedule(){uni.showToast({title:"功能开发中",icon:"none"})},formatDateKey:e=>`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`,isSameDay:(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"日程表"),e.createElementVNode("button",{class:"add-btn",onClick:s[0]||(s[0]=(...e)=>i.addSchedule&&i.addSchedule(...e))},"+")]),e.createElementVNode("view",{class:"calendar-wrapper"},[e.createElementVNode("view",{class:"month-header"},[e.createElementVNode("button",{class:"nav-btn",onClick:s[1]||(s[1]=(...e)=>i.prevMonth&&i.prevMonth(...e))},"‹"),e.createElementVNode("text",{class:"month-title"},e.toDisplayString(i.currentMonth),1),e.createElementVNode("button",{class:"nav-btn",onClick:s[2]||(s[2]=(...e)=>i.nextMonth&&i.nextMonth(...e))},"›")]),e.createElementVNode("view",{class:"calendar-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.weekDays,(t=>(e.openBlock(),e.createElementBlock("view",{class:"day-header",key:t},e.toDisplayString(t),1)))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.calendarDays,(t=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["calendar-day",{active:t.isToday,selected:t.isSelected,"has-event":t.hasEvent}]),key:t.date,onClick:e=>i.selectDay(t)},[e.createElementVNode("text",{class:"day-number"},e.toDisplayString(t.day),1),t.hasEvent?(e.openBlock(),e.createElementBlock("view",{key:0,class:"event-dot"})):e.createCommentVNode("",!0)],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"schedule-list"},[e.createElementVNode("text",{class:"section-title"},e.toDisplayString(i.selectedDateText)+"的日程",1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.selectedDaySchedules,(t=>(e.openBlock(),e.createElementBlock("view",{class:"schedule-item",key:t.id},[e.createElementVNode("view",{class:"time-slot"},e.toDisplayString(t.time),1),e.createElementVNode("view",{class:"schedule-content"},[e.createElementVNode("text",{class:"schedule-title"},e.toDisplayString(t.title),1),e.createElementVNode("text",{class:"schedule-desc"},e.toDisplayString(t.description),1)])])))),128)),0===i.selectedDaySchedules.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"当天没有日程安排")])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-b3dc82a4"]]);const g=s({data:()=>({followingUsers:[]}),onLoad(){this.loadFollowingUsers()},methods:{loadFollowingUsers(){this.followingUsers=[{id:1,name:"设计师小王",description:"专注UI/UX设计",avatar:"https://via.placeholder.com/60x60/4A90E2/FFFFFF?text=王",isFollowing:!0},{id:2,name:"前端开发者",description:"Vue.js技术分享者",avatar:"https://via.placeholder.com/60x60/50E3C2/FFFFFF?text=前",isFollowing:!0}]},toggleFollow(e){e.isFollowing=!e.isFollowing,e.isFollowing||uni.showModal({title:"确认取消关注",content:`确定要取消关注 ${e.name} 吗？`,success:t=>{t.confirm||(e.isFollowing=!0)}})},exploreUsers(){uni.switchTab({url:"/pages/discover/discover"})}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"我的关注")]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"following-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.followingUsers,(t=>(e.openBlock(),e.createElementBlock("view",{class:"user-item",key:t.id},[e.createElementVNode("image",{class:"user-avatar",src:t.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("text",{class:"user-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"user-desc"},e.toDisplayString(t.description),1)]),e.createElementVNode("button",{class:"follow-btn",onClick:e=>i.toggleFollow(t)},e.toDisplayString(t.isFollowing?"已关注":"关注"),9,["onClick"])])))),128))]),0===n.followingUsers.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"还没有关注任何人"),e.createElementVNode("button",{class:"explore-btn",onClick:s[0]||(s[0]=(...e)=>i.exploreUsers&&i.exploreUsers(...e))},"去发现更多用户")])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-b832d081"]]);const u=s({data:()=>({achievements:[]}),onLoad(){this.loadAchievements()},methods:{loadAchievements(){this.achievements=[{id:1,name:"初来乍到",description:"完成第一个任务",icon:"🎯",unlocked:!0,unlockDate:Date.now()-6048e5},{id:2,name:"社交达人",description:"加入5个社群",icon:"👥",unlocked:!0,unlockDate:Date.now()-2592e5},{id:3,name:"坚持不懈",description:"连续7天完成任务",icon:"🔥",unlocked:!1,progress:3,target:7},{id:4,name:"学习达人",description:"完成10个学习类任务",icon:"📚",unlocked:!1,progress:6,target:10},{id:5,name:"运动健将",description:"完成20个运动类任务",icon:"🏃",unlocked:!1,progress:8,target:20},{id:6,name:"人气王",description:"获得100个赞",icon:"⭐",unlocked:!1,progress:45,target:100}]},formatDate:e=>new Date(e).toLocaleDateString("zh-CN")}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"成就徽章")]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"achievement-grid"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.achievements,(t=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["achievement-item",{unlocked:t.unlocked}]),key:t.id},[e.createElementVNode("view",{class:"achievement-icon"},e.toDisplayString(t.icon),1),e.createElementVNode("text",{class:"achievement-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"achievement-desc"},e.toDisplayString(t.description),1),t.unlocked?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"achievement-progress"},[e.createElementVNode("text",{class:"progress-text"},e.toDisplayString(t.progress)+"/"+e.toDisplayString(t.target),1)])),t.unlocked?(e.openBlock(),e.createElementBlock("view",{key:1,class:"unlock-date"},[e.createElementVNode("text",null,e.toDisplayString(i.formatDate(t.unlockDate)),1)])):e.createCommentVNode("",!0)],2)))),128))])])])}],["__scopeId","data-v-c3844ca2"]]);const k=s({data:()=>({inviteCode:"ALPHA2024",shareLink:"https://alpha.example.com/invite/ALPHA2024",inviteStats:{total:5,registered:3,rewards:150}}),methods:{copyInviteCode(){uni.setClipboardData({data:this.inviteCode,success:()=>{uni.showToast({title:"邀请码已复制",icon:"success"})}})},copyShareLink(){uni.setClipboardData({data:this.shareLink,success:()=>{uni.showToast({title:"链接已复制",icon:"success"})}})},shareToWechat(){uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:this.shareLink,title:"Alpha - 任务驱动的轻社交应用",summary:"和我一起在Alpha完成有趣的任务，提升自己！",imageUrl:"https://via.placeholder.com/200x200/00D4AA/FFFFFF?text=Alpha",success:()=>{uni.showToast({title:"分享成功",icon:"success"})},fail:()=>{uni.showToast({title:"分享失败",icon:"none"})}})},shareToMoments(){uni.share({provider:"weixin",scene:"WXSceneTimeline",type:0,href:this.shareLink,title:"Alpha - 任务驱动的轻社交应用",imageUrl:"https://via.placeholder.com/200x200/00D4AA/FFFFFF?text=Alpha",success:()=>{uni.showToast({title:"分享成功",icon:"success"})},fail:()=>{uni.showToast({title:"分享失败",icon:"none"})}})}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"邀请好友")]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"invite-card"},[e.createElementVNode("view",{class:"reward-section"},[e.createElementVNode("text",{class:"reward-title"},"邀请奖励"),e.createElementVNode("view",{class:"reward-list"},[e.createElementVNode("view",{class:"reward-item"},[e.createElementVNode("text",{class:"reward-icon"},"🎁"),e.createElementVNode("text",{class:"reward-text"},"每邀请1人注册获得10积分")]),e.createElementVNode("view",{class:"reward-item"},[e.createElementVNode("text",{class:"reward-icon"},"💰"),e.createElementVNode("text",{class:"reward-text"},"好友完成首个任务您获得5元奖励")]),e.createElementVNode("view",{class:"reward-item"},[e.createElementVNode("text",{class:"reward-icon"},"👑"),e.createElementVNode("text",{class:"reward-text"},"累计邀请10人升级VIP会员")])])]),e.createElementVNode("view",{class:"invite-code-section"},[e.createElementVNode("text",{class:"section-title"},"我的邀请码"),e.createElementVNode("view",{class:"invite-code"},[e.createElementVNode("text",{class:"code-text"},e.toDisplayString(n.inviteCode),1),e.createElementVNode("button",{class:"copy-btn",onClick:s[0]||(s[0]=(...e)=>i.copyInviteCode&&i.copyInviteCode(...e))},"复制")])]),e.createElementVNode("view",{class:"share-section"},[e.createElementVNode("text",{class:"section-title"},"分享给好友"),e.createElementVNode("view",{class:"share-buttons"},[e.createElementVNode("button",{class:"share-btn wechat",onClick:s[1]||(s[1]=(...e)=>i.shareToWechat&&i.shareToWechat(...e))},[e.createElementVNode("text",{class:"share-icon"},"💬"),e.createElementVNode("text",{class:"share-text"},"微信")]),e.createElementVNode("button",{class:"share-btn moments",onClick:s[2]||(s[2]=(...e)=>i.shareToMoments&&i.shareToMoments(...e))},[e.createElementVNode("text",{class:"share-icon"},"📱"),e.createElementVNode("text",{class:"share-text"},"朋友圈")]),e.createElementVNode("button",{class:"share-btn copy",onClick:s[3]||(s[3]=(...e)=>i.copyShareLink&&i.copyShareLink(...e))},[e.createElementVNode("text",{class:"share-icon"},"🔗"),e.createElementVNode("text",{class:"share-text"},"复制链接")])])]),e.createElementVNode("view",{class:"stats-section"},[e.createElementVNode("text",{class:"section-title"},"邀请统计"),e.createElementVNode("view",{class:"stats-grid"},[e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-number"},e.toDisplayString(n.inviteStats.total),1),e.createElementVNode("text",{class:"stat-label"},"累计邀请")]),e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-number"},e.toDisplayString(n.inviteStats.registered),1),e.createElementVNode("text",{class:"stat-label"},"成功注册")]),e.createElementVNode("view",{class:"stat-item"},[e.createElementVNode("text",{class:"stat-number"},e.toDisplayString(n.inviteStats.rewards),1),e.createElementVNode("text",{class:"stat-label"},"获得积分")])])])])])])}],["__scopeId","data-v-8076ee8f"]]);const v=s({data:()=>({currentTab:"friends",friendsList:[],friendRequests:[]}),onLoad(){this.loadFriends(),this.loadFriendRequests()},methods:{loadFriends(){this.friendsList=[{id:1,name:"张小明",avatar:"https://via.placeholder.com/60x60/4A90E2/FFFFFF?text=张",isOnline:!0,description:"热爱运动的程序员",mutualFriends:5},{id:2,name:"李小红",avatar:"https://via.placeholder.com/60x60/FF6B6B/FFFFFF?text=李",isOnline:!1,lastSeen:"2小时前",description:"设计师，喜欢美食和旅行",mutualFriends:8},{id:3,name:"王大力",avatar:"https://via.placeholder.com/60x60/50E3C2/FFFFFF?text=王",isOnline:!0,description:"健身达人，马拉松爱好者",mutualFriends:3},{id:4,name:"赵小美",avatar:"https://via.placeholder.com/60x60/FFE66D/FFFFFF?text=赵",isOnline:!1,lastSeen:"1天前",description:"摄影师，记录生活美好",mutualFriends:12}]},loadFriendRequests(){this.friendRequests=[{id:101,name:"陈小华",avatar:"https://via.placeholder.com/60x60/9B59B6/FFFFFF?text=陈",message:"你好，我们在同一个学习群里，想和你交个朋友",time:Date.now()-72e5},{id:102,name:"刘小强",avatar:"https://via.placeholder.com/60x60/E67E22/FFFFFF?text=刘",message:"看到你的跑步记录很棒，一起运动吧！",time:Date.now()-18e6}]},switchTab(e){this.currentTab=e},getCurrentList(){return"friends"===this.currentTab?this.friendsList:this.friendRequests},viewFriendProfile(e){uni.showToast({title:"功能开发中",icon:"none"})},chatWithFriend(e){uni.navigateTo({url:`/pages/chat/chat?friendId=${e.id}&friendName=${e.name}`})},showFriendMenu(e){uni.showActionSheet({itemList:["查看资料","删除好友","设置备注"],success:t=>{1===t.tapIndex?this.deleteFriend(e):uni.showToast({title:"功能开发中",icon:"none"})}})},deleteFriend(e){uni.showModal({title:"删除好友",content:`确定要删除好友 ${e.name} 吗？`,success:t=>{if(t.confirm){const t=this.friendsList.findIndex((t=>t.id===e.id));t>-1&&(this.friendsList.splice(t,1),uni.showToast({title:"已删除好友",icon:"success"}))}}})},acceptRequest(e){const t={id:e.id,name:e.name,avatar:e.avatar,isOnline:Math.random()>.5,lastSeen:"刚刚",description:"新朋友",mutualFriends:0};this.friendsList.unshift(t);const s=this.friendRequests.findIndex((t=>t.id===e.id));s>-1&&this.friendRequests.splice(s,1),uni.showToast({title:"已添加好友",icon:"success"})},rejectRequest(e){const t=this.friendRequests.findIndex((t=>t.id===e.id));t>-1&&(this.friendRequests.splice(t,1),uni.showToast({title:"已拒绝申请",icon:"success"}))},addFriend(){uni.showActionSheet({itemList:["扫一扫","通过手机号添加","从通讯录添加"],success:e=>{uni.showToast({title:"功能开发中",icon:"none"})}})},exploreUsers(){uni.switchTab({url:"/pages/discover/discover"})},formatTime(e){const t=Date.now()-e,s=Math.floor(t/6e4),a=Math.floor(t/36e5),o=Math.floor(t/864e5);return s<60?`${s}分钟前`:a<24?`${a}小时前`:`${o}天前`}}},[["render",function(t,s,a,o,n,i){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("text",{class:"title"},"我的好友"),e.createElementVNode("button",{class:"add-btn",onClick:s[0]||(s[0]=(...e)=>i.addFriend&&i.addFriend(...e))},"+")]),e.createElementVNode("view",{class:"tabs"},[e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"friends"===n.currentTab}]),onClick:s[1]||(s[1]=e=>i.switchTab("friends"))},[e.createElementVNode("text",null,"好友"),n.friendsList.length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"count"},"("+e.toDisplayString(n.friendsList.length)+")",1)):e.createCommentVNode("",!0)],2),e.createElementVNode("view",{class:e.normalizeClass(["tab-item",{active:"requests"===n.currentTab}]),onClick:s[2]||(s[2]=e=>i.switchTab("requests"))},[e.createElementVNode("text",null,"申请"),n.friendRequests.length?(e.openBlock(),e.createElementBlock("text",{key:0,class:"count"},"("+e.toDisplayString(n.friendRequests.length)+")",1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("view",{class:"content"},["friends"===n.currentTab?(e.openBlock(),e.createElementBlock("view",{key:0,class:"friends-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.friendsList,(t=>(e.openBlock(),e.createElementBlock("view",{class:"friend-item",key:t.id,onClick:e=>i.viewFriendProfile(t)},[e.createElementVNode("image",{class:"friend-avatar",src:t.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"friend-info"},[e.createElementVNode("text",{class:"friend-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"friend-status"},e.toDisplayString(t.isOnline?"在线":t.lastSeen),1),e.createElementVNode("text",{class:"friend-desc"},e.toDisplayString(t.description),1)]),e.createElementVNode("view",{class:"friend-actions"},[e.createElementVNode("button",{class:"action-btn chat",onClick:e.withModifiers((e=>i.chatWithFriend(t)),["stop"])},"💬",8,["onClick"]),e.createElementVNode("button",{class:"action-btn more",onClick:e.withModifiers((e=>i.showFriendMenu(t)),["stop"])},"⋯",8,["onClick"])])],8,["onClick"])))),128))])):e.createCommentVNode("",!0),"requests"===n.currentTab?(e.openBlock(),e.createElementBlock("view",{key:1,class:"requests-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.friendRequests,(t=>(e.openBlock(),e.createElementBlock("view",{class:"request-item",key:t.id},[e.createElementVNode("image",{class:"request-avatar",src:t.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"request-info"},[e.createElementVNode("text",{class:"request-name"},e.toDisplayString(t.name),1),e.createElementVNode("text",{class:"request-message"},e.toDisplayString(t.message),1),e.createElementVNode("text",{class:"request-time"},e.toDisplayString(i.formatTime(t.time)),1)]),e.createElementVNode("view",{class:"request-actions"},[e.createElementVNode("button",{class:"accept-btn",onClick:e=>i.acceptRequest(t)},"接受",8,["onClick"]),e.createElementVNode("button",{class:"reject-btn",onClick:e=>i.rejectRequest(t)},"拒绝",8,["onClick"])])])))),128))])):e.createCommentVNode("",!0),0===i.getCurrentList().length?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},e.toDisplayString("friends"===n.currentTab?"还没有好友，快去添加吧":"暂无好友申请"),1),"friends"===n.currentTab?(e.openBlock(),e.createElementBlock("button",{key:0,class:"explore-btn",onClick:s[3]||(s[3]=(...e)=>i.exploreUsers&&i.exploreUsers(...e))},"发现新朋友")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])}],["__scopeId","data-v-eaadf3b1"]]);__definePage("pages/tasks/tasks",a),__definePage("pages/index/index",o),__definePage("pages/groups/groups",n),__definePage("pages/discover/discover",i),__definePage("pages/me/me",l),__definePage("pages/taskDetail/taskDetail",c),__definePage("pages/groupDetail/groupDetail",r),__definePage("pages/chat/chat",d),__definePage("pages/myGroups/myGroups",m),__definePage("pages/myTasks/myTasks",p),__definePage("pages/schedule/schedule",h),__definePage("pages/following/following",g),__definePage("pages/achievements/achievements",u),__definePage("pages/invite/invite",k),__definePage("pages/friends/friends",v);const E={onLaunch:function(){t("log","at App.vue:4","App Launch")},onShow:function(){t("log","at App.vue:7","App Show")},onHide:function(){t("log","at App.vue:10","App Hide")}};const{app:w,Vuex:V,Pinia:N}={app:e.createVueApp(E)};uni.Vuex=V,uni.Pinia=N,w.provide("__globalStyles",__uniConfig.styles),w._component.mpType="app",w._component.render=()=>{},w.mount("#app")}(Vue);
